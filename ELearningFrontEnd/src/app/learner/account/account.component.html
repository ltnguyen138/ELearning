<div class=" mt-10 md:w-[90%] md:max-w-[1400px]  mx-auto px-2 text-text-color mb-10 relative">

    <div class="title border-b-[2px] border-border-color">
        <h1 class="leading-relaxed">Tài khoản</h1>
    </div>

    <form [formGroup]="accountForm" (change)="isUpdateProfile=true">
        <div class="w-full  mt-8">
            <label  class="block text-base font-[600] mt-15 ">Ảnh đại diện</label>
            <div class=" mt-5 flex justify-center md:justify-start">
                <img [src]="profilePictureUrl" alt="avatar" class="w-[200px] h-[200px] rounded-full border-custom-gray border-2 shadow-gray-400 shadow-md">
            </div>
            <div class=" mt-5 flex gap-3  justify-center md:justify-start" >
                <label class="w-[200px] cursor-pointer bg-active-btn text-white px-4 py-2.5 rounded-lg flex items-center space-x-2 hover:bg-active-btn-h transition gap-3">
                    <i class="fa-solid fa-arrow-up-from-bracket fa-lg"></i>
                    <span>Đổi ảnh đại diện</span>
                    <input type="file" class="hidden" (change)="onUploadImg($event)" >
                </label>
                <button class="px-4 py-2.5 rounded-lg flex items-center bg-primary-color hover:bg-active-btn-h text-white disabled:bg-undo-btn " [disabled]="!isUpdateProfile" (click)="saveProfilePicture()">Lưu ảnh</button>
            </div>
        </div>
        <div class="w-full  mt-8 md:grid md:grid-cols-2 md:gap-5">
            <div class="md:col-span-1">
                <div class="">
                    <label for="email" class="block text-base font-[600]  ">Email</label>
                    <div class="mt-2">
                        <input id="email" name="email" type="email" autocomplete="email"
                               class="
                                   block
                                   w-full
                                   py-2.5 px-1.5
                                   bg-[FAFAFA]
                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-md shadow-sm
                                   focus:border-b-[3px] focus:border-primary-color
                                   transition-all duration-100 ease-out
                                   "
                               formControlName="email"
                        >
                    </div>
                </div>
                <div class="mt-3">
                    <label for="password" class="block text-base font-[600]  ">Mật khẩu</label>
                    <div class="mt-2">
                        <input id="password" name="password" type="password" autocomplete="password" required disabled value="********"
                               class="
                           w-[55%] md:w-[65%] xl:w-[80%]
                           py-2.5 px-1.5
                           bg-[FAFAFA]
                           border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-md shadow-sm
                           focus:border-b-[3px] focus:border-primary-color
                           transition-all duration-100 ease-out
                           "
                        >
                        <button class="w-[45%] md:w-[35%] xl:w-[20%] rounded-md bg-active-btn text-white py-2.5 px-2 shadow-sm hover:bg-active-btn-h"
                                type="button"
                                (click)="isOpenChangePassword=true"
                        >
                            Đổi mật khẩu
                        </button>

                    </div>
                </div>
                <div class="mt-3">
                    <label for="createdTime" class="block text-base font-[600]  ">Ngày tạo tài khoản</label>
                    <div class="mt-2">
                        <input id="createdTime" name="createdTime" type="text"
                               class="
                                   block
                                   w-full
                                   py-2.5 px-1.5
                                   bg-[FAFAFA]
                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-md shadow-sm
                                   focus:border-b-[3px] focus:border-primary-color
                                   transition-all duration-100 ease-out
                                   "
                               formControlName="createdTime"
                        >
                    </div>
                </div>
                <div class="mt-3">
                    <label for="updatedTime" class="block text-base font-[600]  ">Cập nhật gần nhất</label>
                    <div class="mt-2">
                        <input id="updatedTime" name="updatedTime" type="text"
                               class="
                                   block
                                   w-full
                                   py-2.5 px-1.5
                                   bg-[FAFAFA]
                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-md shadow-sm
                                   focus:border-b-[3px] focus:border-primary-color
                                   transition-all duration-100 ease-out
                                   "
                               formControlName="updatedTime"
                        >
                    </div>
                </div>
            </div>

            <div class="md:col-span-1">
                <div>
                    <label for="fullName" class="block text-base font-[600]  ">Họ và tên</label>
                    <div class="mt-2">
                        <input id="fullName" name="fullName" type="text" autocomplete="fullName"
                               class="
                                   block
                                   w-full
                                   py-2.5 px-1.5
                                   bg-[FAFAFA]
                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-md shadow-sm
                                   focus:border-b-[3px] focus:border-primary-color
                                   transition-all duration-100 ease-out
                                   "
                               formControlName="fullName"
                        >
                        <div  class="text-red-600 text-sm" *ngIf="accountForm.get('fullName')!.invalid && accountForm.get('fullName')!.touched">
                            Họ và tên không được để trống
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <label for="phoneNumber" class="block text-base font-[600]  ">Số điện thoại</label>
                    <div class="mt-2">
                        <input id="phoneNumber" name="phoneNumber" type="text" autocomplete="phoneNumber"
                               class="
                                   block
                                   w-full
                                   py-2.5 px-1.5
                                   bg-[FAFAFA]
                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-md shadow-sm
                                   focus:border-b-[3px] focus:border-primary-color
                                   transition-all duration-100 ease-out
                                   "
                                 formControlName="phoneNumber"
                        >

                    </div>
                </div>
                <div class="mt-3">
                    <label for="address" class="block text-base font-[600]  ">Địa chỉ</label>
                    <div class="mt-2">
                        <input id="address" name="address" type="text"
                               class="
                                   block
                                   w-full
                                   py-2.5 px-1.5
                                   bg-[FAFAFA]
                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-md shadow-sm
                                   focus:border-b-[3px] focus:border-primary-color
                                   transition-all duration-100 ease-out
                                   "
                               formControlName="address"
                        >

                    </div>
                </div>
                <div class="mt-3">
                    <label for="birthDate" class="block text-base font-[600]  ">Ngày sinh</label>
                    <div class="mt-2">
                        <p-calendar
                                class="block
                                    w-full

                                    bg-[FAFAFA]
                                    border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-md shadow-sm
                                    focus:border-b-[3px] focus:border-primary-color
                                    transition-all duration-100 ease-out"
                                dateFormat="dd-mm-yy"
                                formControlName="birthDate"
                                (onSelect)="isUpdateProfile=true"
                        >
                        </p-calendar>

                    </div>
                </div>
                <div class="mt-3">
                    <label for="title" class="block text-base font-[600]  ">Tiêu đề</label>
                    <div class="mt-2">
                        <input id="title" name="title" type="text"
                               class="
                                   block
                                   w-full
                                   py-2.5 px-1.5
                                   bg-[FAFAFA]
                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-md shadow-sm
                                   focus:border-b-[3px] focus:border-primary-color
                                   transition-all duration-100 ease-out
                                   "
                               formControlName="title"
                        >

                    </div>
                </div>
                <div class="mt-3">
                    <label for="bio" class="block text-base font-[600]  ">Giới thiệu</label>
                    <div class="mt-2 h-32">
                        <textarea id="bio" name="bio" type="text" row="4"
                               class="
                                   block
                                   w-full h-full
                                   py-2.5 px-1.5
                                   bg-[FAFAFA]
                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-md shadow-sm
                                   focus:border-b-[3px] focus:border-primary-color
                                   transition-all duration-100 ease-out
                                   "
                                 formControlName="bio"
                        >
                        </textarea>
                    </div>
                    <div class="fixed inset-0  bg-[rgba(1,1,1,0.3)] flex items-center justify-center" *ngIf="isOpenChangePassword">
                        <div class=" w-full  md:w-[700px]  bg-[#fafafa] px-5 rounded-xl shadow-blue-950 shadow-lg">
                            <div class="title border-b-[2px] border-border-color mt-5">
                                <h1 class="leading-relaxed text-center">Đổi mật khẩu</h1>
                            </div>
                            <div class="mt-5 mb-8">
                                <form [formGroup]="changePasswordForm">
                                    <div class="mt-3">
                                        <label for="oldPassword" class="block text-base font-[600]  ">Mật khẩu cũ</label>
                                        <div class="mt-2">
                                            <input id="oldPassword" name="oldPassword" type="password" autocomplete="oldPassword"
                                                   class="
                                                   block
                                                   w-full
                                                   py-2.5 px-1.5
                                                   bg-[FAFAFA]
                                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color shadow-gray-400 shadow
                                                   focus:border-b-[3px] focus:border-primary-color
                                                   transition-all duration-100 ease-out
                                                   "
                                                   formControlName="oldPassword"
                                            >
                                        </div>
                                        <span class="text-yellow-500 mt-2 block"> <i class="fa-solid fa-triangle-exclamation"></i> &emsp;Để trống nếu đây là lần đổi mật khẩu đầu tiên từ lần đăng nhập đầu tiên qua tài khoản Google</span>
                                    </div>
                                    <div class="mt-3">
                                        <label for="newPassword" class="block text-base font-[600]  ">Mật khẩu mới</label>
                                        <div class="mt-2 relative">
                                            <input id="newPassword" name="newPassword" [type]="isShowPassword ? 'text' : 'password'" autocomplete="newPassword"
                                                   class="
                                                   block
                                                   w-full
                                                   py-2.5 px-1.5
                                                   bg-[FAFAFA]
                                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color shadow-gray-400 shadow
                                                   focus:border-b-[3px] focus:border-primary-color
                                                   transition-all duration-100 ease-out
                                                   "
                                                   formControlName="newPassword"
                                            >
                                            <button
                                                    type="button"
                                                    class="absolute right-0 top-1 mt-2 mr-2"
                                                    (click)="isShowPassword = !isShowPassword"
                                            >
                                                <span *ngIf="isShowPassword" class="text-blue-950"><i class="fa-solid fa-eye-slash"></i></span>
                                                <span *ngIf="!isShowPassword" class="text-blue-950"><i class="fa-solid fa-eye"></i></span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <label for="confirmPassword" class="block text-base font-[600]  ">Nhập lại mật khẩu mới</label>
                                        <div class="mt-2">
                                            <input id="confirmPassword" name="confirmPassword" type="password" autocomplete="confirmPassword"
                                                   class="
                                   block
                                   w-full
                                   py-2.5 px-1.5
                                   bg-[FAFAFA]
                                   border-[2px] border-border-color border-b-[1px] outline-0 border-b-primary-color rounded-ms shadow-gray-400 shadow
                                   focus:border-b-[3px] focus:border-primary-color
                                   transition-all duration-100 ease-out
                                   "
                                                   formControlName="confirmPassword"
                                            >
                                        </div>

                                    </div>
                                    <div class="mt-5 flex justify-center gap-10">
                                        <button class="py-2.5 px-14 text-white font-semibold bg-active-btn hover:bg-active-btn-h  rounded-md shadow-gray-400 shadow-md disabled:bg-custom-gray" (click)="changePassword()">Lưu</button>
                                        <button class="py-2.5 px-10  font-semibold hover:bg-custom-gray rounded-md shadow-gray-400 shadow-md border-2 border-gray-400 bg-gray-100" (click)="isOpenChangePassword=false" >Quay lại</button>
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>             </div>

            </div>
        </div>
        <div class="acction-btn mt-10 flex justify-center gap-10">
            <button class="py-2.5 px-14 text-white font-semibold bg-active-btn hover:bg-active-btn-h  rounded-md shadow-gray-400 shadow-md disabled:bg-custom-gray" [disabled]="!isUpdateProfile" (click)="updateProfile()">Lưu</button>
            <button class="py-2.5 px-14 text-white font-semibold bg-active-btn hover:bg-active-btn-h  rounded-md shadow-gray-400 shadow-md disabled:bg-custom-gray"  *ngIf="loggedUser && loggedUser.role.name== 'LEARNER'" (click)="updateRoleInstruction()">Trở thành giảng viên</button>
            <button class="py-2.5 px-10  font-semibold hover:bg-custom-gray rounded-md shadow-gray-400 shadow-md border-2 bg-gray-100" routerLink="/" >Quay lại</button>
        </div>
    </form>


</div>

